{% comment %}
  Product Section v1.0 - CLEAN PROFESSIONAL LAYOUT
  - Direct video gallery integration
  - Streamlined variant switching
  - Professional trust indicators
  - Clean, focused design
{% endcomment %}

{{ 'component-product-variant-picker.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch.css' | asset_url | stylesheet_tag }}
{{ 'component-swatch-input.css' | asset_url | stylesheet_tag }}

<section id="MainProduct-{{ section.id }}" class="enhanced-product-section" data-section="{{ section.id }}">
  <div class="product-container">
    <!-- Media Gallery (60% desktop, 100% mobile) -->
    <div class="product-media">
      {% render 'enhanced-product-media-gallery-simple', product: product %}
    </div>

    <!-- Product Information Panel (40% desktop, 100% mobile) -->
    <div class="product-info">
      <div class="product-header">
        <div class="product__title">
          <h1>{{ product.title | escape }}</h1>
        </div>
        
        <div class="product-price">
          {%- render 'price', product: product, use_variant: true, show_badges: false, price_class: 'price--large' -%}
        </div>
      </div>
      
      <!-- Enhanced Product Meta with Variant Cards -->
      {% render 'enhanced-product-meta', product: product %}

      <!-- Clean Buy Buttons Section -->
      <div class="product-form-wrapper">
        {%- render 'buy-buttons',
          product: product,
          product_form_id: 'product-form-' | append: section.id,
          section_id: section.id,
          show_pickup_availability: false
        -%}
      </div>
      
      <!-- Professional Description -->
      {%- if product.description != blank -%}
        <div class="product-description">
          <div class="rte">
            {{ product.description }}
          </div>
        </div>
      {%- endif -%}

      <!-- Essential Trust Indicators -->
      <div class="trust-indicators">
        <div class="trust-item">
          <span class="trust-icon">‚ö°</span>
          <span class="trust-text">Instant Download</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üìÑ</span>
          <span class="trust-text">Commercial License</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">üîí</span>
          <span class="trust-text">Secure Payment</span>
        </div>
        <div class="trust-item">
          <span class="trust-icon">‚≠ê</span>
          <span class="trust-text">Premium Quality</span>
        </div>
      </div>

      <!-- Social Sharing -->
      <div class="social-sharing">
        <h4 class="sharing-title">{{ 'general.social.share' | t }}</h4>
        <div class="sharing-buttons">
          {%- render 'share-button', share_url: request.origin | append: product.url, share_title: product.title -%}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Professional Video Store Styles 2025 - CLEAN VERSION -->
<style>
  /* ==========================================================================
     RESPONSIVE LAYOUT SYSTEM
     ========================================================================== */
  
.enhanced-product-section {
    padding: 2rem 1rem;
  background: #ffffff;
}

.product-container {
  max-width: 1400px;
  margin: 0 auto;
    display: grid;
    gap: 2rem;
    grid-template-columns: 1fr;
  }
  
  /* Desktop Layout - Optimized for screen height */
  @media (min-width: 990px) {
    .enhanced-product-section {
      padding: 1rem;
      min-height: 100vh;
      display: flex;
      align-items: center;
    }
    
    .product-container {
      grid-template-columns: 58% 40%;
      gap: 2%;
      padding: 0;
      height: 90vh;
      max-height: 90vh;
      align-items: stretch;
      width: 100%;
    }
    
    .product-media {
      width: 100%;
      height: 100%;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .product-info {
      width: 100%;
      height: 100%;
      max-height: 90vh;
      padding: 2rem 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
  }

  /* ==========================================================================
     PRODUCT INFORMATION STYLING
     ========================================================================== */

  .product-header {
    border-bottom: 1px solid #e5e7eb;
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .product__title h1 {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.2;
    color: #111827;
    margin: 0 0 1rem 0;
  }

  .product-price {
    font-size: 1.75rem;
    font-weight: 600;
    color: #059669;
  }

  /* ==========================================================================
     FORM AND BUTTONS
     ========================================================================== */

  .product-form-wrapper {
    margin: 1.5rem 0;
  }

  .product-form__submit {
    width: 100%;
    padding: 1rem 2rem;
    font-size: 1.1rem;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    color: white;
    margin-bottom: 1rem;
  }

  .product-form__submit:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(5, 150, 105, 0.3);
  }

  .product-form__submit:disabled {
    background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Shopify Payment Buttons */
  .shopify-payment-button {
    margin-top: 1rem;
  }

  .shopify-payment-button__button {
    border-radius: 12px !important;
  }

  /* ==========================================================================
     TRUST INDICATORS
     ========================================================================== */

  .trust-indicators {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    margin: 1.5rem 0;
  }

  .trust-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.9rem;
    color: #374151;
  }

  .trust-icon {
    font-size: 1.2rem;
    flex-shrink: 0;
  }

  .trust-text {
    font-weight: 500;
  }

  /* ==========================================================================
     PRODUCT DESCRIPTION
     ========================================================================== */

  .product-description {
    margin: 1.5rem 0;
    padding: 1.5rem;
    background: #fafbfc;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
  }

  .product-description .rte {
    font-size: 1rem;
    line-height: 1.6;
    color: #374151;
  }

  .product-description h3 {
    color: #111827;
    margin-bottom: 1rem;
  }

  /* ==========================================================================
     SOCIAL SHARING
     ========================================================================== */

  .social-sharing {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid #e5e7eb;
  }

  .sharing-title {
    font-size: 1rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 1rem;
  }

  .sharing-buttons {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  /* ==========================================================================
     MOBILE RESPONSIVE
     ========================================================================== */

  @media (max-width: 989px) {
    .enhanced-product-section {
      padding: 1rem;
    }
    
    .product-info {
      padding: 0;
    }
    
    .product__title h1 {
      font-size: 1.75rem;
    }
    
    .product-price {
      font-size: 1.5rem;
    }
    
    .trust-indicators {
      grid-template-columns: 1fr;
      gap: 0.75rem;
      padding: 1rem;
    }
  }

  @media (max-width: 640px) {
    .product__title h1 {
      font-size: 1.5rem;
    }
    
    .product-price {
      font-size: 1.25rem;
    }
  }
</style>

<!-- Simplified JavaScript - Only Essential Functions -->
<script>
  (function() {
    'use strict';
    
    // Wait for DOM to be ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeProduct);
    } else {
      initializeProduct();
    }
    
    function initializeProduct() {
      console.log('üé¨ GenStock Video Product: Initializing...');
      
      // Enhanced variant change handling for meta sync
      document.addEventListener('variant:change', function(event) {
        if (!event.detail.variant) return;
        
        const variant = event.detail.variant;
        console.log('üîÑ Variant changed:', variant.id);
        
        // Update all variant inputs
        const variantInputs = document.querySelectorAll('input[name="id"]');
        variantInputs.forEach(input => {
          input.value = variant.id;
        });
        
        // Update price display
        updatePriceDisplay(variant);
      });
      
      function updatePriceDisplay(variant) {
        if (variant.price !== undefined) {
          const priceElements = document.querySelectorAll('.price--large');
          priceElements.forEach(el => {
            const formattedPrice = new Intl.NumberFormat('en-US', {
              style: 'currency',
              currency: 'USD'
            }).format(variant.price / 100);
            el.textContent = formattedPrice;
          });
        }
      }
      
      console.log('‚úÖ GenStock Video Product: Ready');
    }
  })();
</script>

{% schema %}
{
  "name": "Product Section v1.0",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_zoom",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "header",
      "content": "Media gallery"
    },
    {
      "type": "select",
      "id": "gallery_layout",
      "label": "Desktop layout",
      "options": [
        {
          "value": "stacked",
          "label": "Stacked"
        },
        {
          "value": "thumbnails_left",
          "label": "Thumbnails left"
        }
      ],
      "default": "thumbnails_left"
    }
  ],
  "blocks": [
    {
      "type": "buy_buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "Show dynamic checkout buttons",
          "info": "Using the payment methods available on your store, customers see their preferred option, like PayPal or Apple Pay."
        }
      ]
    }
  ]
}
{% endschema %} 